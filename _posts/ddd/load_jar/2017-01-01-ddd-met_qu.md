---
layout: post
title:  ddd-qus
date: 2017-01-01
tags: ddd
---

## 遇见的问题
- 平台项目调用扩展项目jar包的时候,因为接口实现的地方入参使用了参数子类作为参数
  - Caused by: java.lang.RuntimeException: java.lang.NoSuchMethodException:
  -
  ``` java
  public interface BuildRefundContextExtension {
      void process(BaseRefundContext<BaseRefundParam, Result<?>> context);
  }

  ApplyRefundContext applyRefundContext = new ApplyRefundContext();

  //调用
  XX.process()
  //
  public class ApplyRefundContext extends BaseRefundContext<ApplyRefundParam, Result<ApplyRefundInfo>> {}

  ```

#### 解决方案 -- 获取super

```java
private Method getMethod(Object extension, String extensionMethod, Class<?> aClass) {
       try {
           return extension.getClass().getMethod(extensionMethod, aClass);
       } catch (NoSuchMethodException e) {
           log.warn("获取方法异常", e);
           if (aClass.getSuperclass() == null) {
               return null;
           }
           return getMethod(extension, extensionMethod, aClass.getSuperclass());
       }
   }
```
